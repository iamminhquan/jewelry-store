<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chi tiết Liên hệ #{{ contact.ma_lien_he }} | Jewelry Store Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="min-h-screen bg-slate-50 text-slate-800">
    <div class="flex min-h-screen">
      <!-- Thanh dashboard bên trái -->
      {% include "layout_admin/aside_dashboard.html" %}
      
      <!-- Nội dung chính -->
      <div class="flex flex-1 flex-col">
        <header
          class="flex flex-wrap items-center justify-between gap-4 border-b border-slate-200 bg-white px-6 py-4"
        >
          <div>
            <a href="{{ url_for('admin_contact.show_contact_page') }}" class="text-sm text-slate-500 hover:text-rose-500 transition">
              ← Quay lại danh sách
            </a>
            <h1 class="text-xl font-semibold text-slate-900 mt-1">
              CHI TIẾT LIÊN HỆ #{{ contact.ma_lien_he }}
            </h1>
          </div>
          <div class="flex items-center gap-3">
            <form
              method="post"
              action="{{ url_for('admin_contact.delete_contact_route', id=contact.ma_lien_he) }}"
              onsubmit="return confirm('Bạn có chắc muốn xoá liên hệ này không?');"
            >
              <button
                type="submit"
                class="rounded-lg bg-rose-500 px-4 py-2 text-sm font-semibold text-white hover:bg-rose-600"
              >
                Xoá liên hệ
              </button>
            </form>
          </div>
        </header>

        <main class="flex-1 space-y-6 px-6 py-6">
          <div class="grid gap-6 lg:grid-cols-2">
            <!-- Thông tin khách hàng -->
            <section class="rounded-2xl bg-white p-6 shadow-sm ring-1 ring-slate-100">
              <h2 class="text-base font-semibold text-slate-900 mb-4 flex items-center gap-2">
                <svg class="h-5 w-5 text-rose-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg>
                Thông tin khách hàng
              </h2>
              
              <div class="space-y-4">
                <div class="flex items-center gap-3 p-3 rounded-lg bg-slate-50">
                  <div class="flex h-10 w-10 items-center justify-center rounded-full bg-rose-100 text-rose-600 font-bold">
                    {{ contact.ten_khach_hang[0] | upper }}
                  </div>
                  <div>
                    <p class="font-medium text-slate-900">{{ contact.ten_khach_hang }}</p>
                    <p class="text-sm text-slate-500">Khách hàng</p>
                  </div>
                </div>

                <div class="grid grid-cols-1 gap-4">
                  <div class="p-3 rounded-lg border border-slate-200">
                    <p class="text-xs text-slate-500 uppercase tracking-wide">Email</p>
                    <a href="mailto:{{ contact.email }}" class="text-blue-600 hover:underline font-medium">
                      {{ contact.email }}
                    </a>
                  </div>
                  
                  <div class="p-3 rounded-lg border border-slate-200">
                    <p class="text-xs text-slate-500 uppercase tracking-wide">Số điện thoại</p>
                    <a href="tel:{{ contact.so_dien_thoai }}" class="text-blue-600 hover:underline font-medium">
                      {{ contact.so_dien_thoai }}
                    </a>
                  </div>

                  <div class="p-3 rounded-lg border border-slate-200">
                    <p class="text-xs text-slate-500 uppercase tracking-wide">Ngày gửi</p>
                    <p class="font-medium text-slate-900">
                      {{ contact.ngay_tao.strftime('%d/%m/%Y lúc %H:%M') if contact.ngay_tao else 'Không xác định' }}
                    </p>
                  </div>

                  {% if contact.ma_tai_khoan %}
                  <div class="p-3 rounded-lg border border-slate-200">
                    <p class="text-xs text-slate-500 uppercase tracking-wide">Mã tài khoản</p>
                    <p class="font-medium text-slate-900">#{{ contact.ma_tai_khoan }}</p>
                  </div>
                  {% endif %}
                </div>
              </div>
            </section>

            <!-- Nội dung liên hệ -->
            <section class="rounded-2xl bg-white p-6 shadow-sm ring-1 ring-slate-100">
              <h2 class="text-base font-semibold text-slate-900 mb-4 flex items-center gap-2">
                <svg class="h-5 w-5 text-rose-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                </svg>
                Nội dung liên hệ
              </h2>
              
              <div class="p-4 rounded-lg bg-slate-50 border border-slate-200">
                <p class="text-slate-700 whitespace-pre-wrap leading-relaxed">{{ contact.noi_dung }}</p>
              </div>

              <!-- Hành động phản hồi -->
              <div class="mt-6 pt-4 border-t border-slate-200">
                <p class="text-sm text-slate-500 mb-3">Phản hồi nhanh:</p>
                <div class="flex flex-wrap gap-2">
                  <a
                    href="mailto:{{ contact.email }}?subject=Phản hồi liên hệ từ Jewelry Store"
                    class="inline-flex items-center gap-2 rounded-lg bg-blue-500 px-4 py-2 text-sm font-medium text-white hover:bg-blue-600 transition"
                  >
                    <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                      <polyline points="22,6 12,13 2,6"></polyline>
                    </svg>
                    Gửi Email
                  </a>
                  <a
                    href="tel:{{ contact.so_dien_thoai }}"
                    class="inline-flex items-center gap-2 rounded-lg bg-emerald-500 px-4 py-2 text-sm font-medium text-white hover:bg-emerald-600 transition"
                  >
                    <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                    </svg>
                    Gọi điện
                  </a>
                </div>
              </div>
            </section>
          </div>
        </main>
      </div>
    </div>
  </body>
</html>
